# Hue App
app:
  build: .
  ports:
    - "3000:3000"
  links:
    - cassandra
  volumes:
    - .:/usr/src/app
  command: nodemon -L index.js

# Cassandra
cassandra:
  build: cassandra/
  expose:
    - "9042"

# ML Linear Regression
ml:
  build: script/
  links:
    - cassandra
    - rabbitmq:hulux.rabbitmq
  volumes:
    - ./script:/usr/src/app

# RabbitMQ
rabbitmq:
  image: rabbitmq:3.6
  hostname: hulux.rabbitmq
  environment:
    - RABBITMQ_NODENAME=hulux@hulux.rabbitmq
    - RABBITMQ_ERLANG_COOKIE=hulux-cookie
    - RABBITMQ_DEFAULT_USER=hulux
    - RABBITMQ_DEFAULT_PASS=hulux

worker:
  build: worker/
  links:
    - rabbitmq:hulux.rabbitmq
  volumes:
    - .:/usr/src/app
