#!/bin/bash
hubert_id=`docker ps -f name=hubert_hubert_1 --format "{{.ID}}"`

echo "Starting Cassandra container ..."
docker start hubert_cassandra_1

echo "Starting RabbitMQ container ..."
docker start hubert_rabbitmq_1

echo "Starting Hubert container ..."
if [ -n $hubert_id ]; then
  docker start hubert_hubert_1
else
  docker run --name hubert_hubert_1 -itd \
    hubert_hubert:latest NODE_ENV=production npm start
fi

echo "Starting Learning container ..."
docker run -it --name hubert_learn_1 --link hubert_cassandra_1:cassandra --link hubert_rabbitmq_1:hubert.rabbitmq hubert_learn:latest
